@inherits FluxorComponent

@inject IState<EventLogState> EventLogState
@inject IState<SettingsState> SettingsState

@{ var selectedEvent = EventLogState.Value.SelectedEvent; }
@if (selectedEvent is not null)
{
    <div class="details-pane" data-toggle="@_expandMenu.ToString().ToLower()">

        <div class="details-header">
            <div>Details</div>
            <span class="button-toggle" data-rotate="@_expandMenu.ToString().ToLower()" @onclick="ToggleMenu">
                <i class="bi bi-caret-up"></i>
            </span>
        </div>

        <div class="details-group" data-toggle="@_expandXml.ToString().ToLower()">
            <div class="details-row">
                <div>Source: @selectedEvent.Source</div>
                <div>Event Id: @selectedEvent.Id</div>
                <div>Level: @selectedEvent.Level</div>
                <div>Date and Time: @selectedEvent.TimeCreated?.ConvertTimeZone(SettingsState.Value.TimeZone)</div>
            </div>

            <div>Description:</div>
            <p class="details-description">@selectedEvent.Description</p>
        </div>

        <div class="details-row-xml">
            <div>XML:</div>
            <button class="button-primary" @onclick="CopyEvent">Copy Event</button>
            <span class="button-toggle" data-rotate="@_expandXml.ToString().ToLower()" @onclick="ToggleXml">
                <i class="bi bi-caret-up"></i>
            </span>
        </div>

        <p class="details-xml" data-toggle="@_expandXml.ToString().ToLower()">@selectedEvent.Xml</p>

    </div>
}
